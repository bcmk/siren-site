<!DOCTYPE html>
<html lang="ru">

<head>
    {{ template "head" . }}
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@siren_tlg">
    <meta name="twitter:creator" content="@siren_tlg">
    <meta name="twitter:title" content="SIREN">
    <meta name="twitter:description" content="Бот постит в ваш канал или группу">
    <meta name="twitter:image" content="https://siren.chat/icons/siren-1024x1024.png">
    <meta name="image" property="og:image" content="https://siren.chat/icons/siren-1024x1024.png">
    <title>SIREN — Бот постит в ваш канал или группу</title>
</head>

<body>
{{ template "header" }}
<div class="container">
    <main>
        <h1 class="mt-4">Бот постит в ваш канал или группу</h1>
        <p>
            Вы можете автоматически оповещать ваших пользователей в вашем Telegram-канале или группе, когда вы онлайн.
        </p>

        <h4>У меня...</h4>
        <div class="mb-3 platform-selector" id="type-selector">
            <button class="btn btn-outline-dark platform-btn me-2 mb-2 active" data-type="channel">Канал</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-type="group">Группа</button>
        </div>

        <h4>Моя стриминговая платформа</h4>
        <div class="mb-3 platform-selector" id="platform-selector">
            <button class="btn btn-outline-dark platform-btn me-2 mb-2 active" data-platform="Twitch">Twitch</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-platform="Chaturbate">Chaturbate</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-platform="Stripchat">Stripchat</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-platform="BongaCams">BongaCams</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-platform="LiveJasmin">LiveJasmin</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-platform="CamSoda">CamSoda</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-platform="Flirt4Free">Flirt4Free</button>
            <button class="btn btn-outline-dark platform-btn me-2 mb-2" data-platform="Streamate">Streamate</button>
        </div>

        <h4>Мой никнейм</h4>
        <div class="mb-3 col-sm-4">
            <input type="text" class="form-control" id="username-input" placeholder="Введите ваш никнейм">
        </div>
        <div id="bongacams-warning" class="p-3 mb-3 bg-warning" style="display:none;">
            Пожалуйста, не используйте "отображаемое имя" или "настоящее имя".
            Используйте имя пользователя, которое вы вводите при логине!
        </div>

        <div id="instructions" style="display:none;">

            <p>
                По возможности приведены боты, работающие на русском языке.
                Команды для англоязычных ботов тут <a class="text-muted" href="{{ .lang.en }}">English</a>.
            </p>

            <h4>Шаг 1: Добавьте бота в <span class="type-name-accusative"></span></h4>

            <div id="channel-steps">
                <ol>
                    <li>Откройте ваш канал в Telegram</li>
                    <li>Нажмите на название канала вверху, чтобы открыть информацию о канале</li>
                    <li>Нажмите <strong>Администраторы</strong></li>
                    <li>Нажмите <strong>Добавить администратора</strong></li>
                    <li>Найдите <span class="mono bot-username"></span></li>
                    <li>Выберите бота из результатов поиска</li>
                    <li>Включите разрешение: <strong>Публикация сообщений</strong></li>
                    <li>Нажмите галочку для подтверждения</li>
                </ol>
                <div class="p-3 mb-3 bg-warning">
                    <strong>Важно:</strong> Без права на публикацию сообщений бот не сможет даже ответить на команды.
                </div>
            </div>

            <div id="group-steps">
                <ol>
                    <li>Откройте вашу группу в Telegram</li>
                    <li>Нажмите на название группы вверху, чтобы открыть информацию о группе</li>
                    <li>Нажмите <strong>Добавить участников</strong> (или <strong>Добавить</strong>)</li>
                    <li>Найдите <span class="mono bot-username"></span></li>
                    <li>Выберите бота из результатов поиска, чтобы добавить его</li>
                </ol>
            </div>

            <h4>Шаг 2: Подпишитесь на свой стрим</h4>
            <p>
                Отправьте эту команду в <span class="type-name-prepositional"></span>, чтобы начать получать оповещения.
            </p>
            <div class="d-flex align-items-center bg-white rounded border p-2 mb-2">
                <code class="mono me-auto">/add@<span class="bot-username-bare"></span> <strong><em class="add-placeholder"></em></strong></code>
                <button class="btn btn-outline-secondary btn-sm ms-2 copy-btn" title="Скопировать"><i class="fas fa-copy"></i></button>
            </div>
            <p>Вы можете удалить команду после установки бота.</p>

            <h4>Шаг 3 (необязательный): Отключить офлайн-оповещения</h4>
            <p>
                По умолчанию бот также уведомляет, когда вы уходите офлайн. Чтобы отключить офлайн-оповещения, отправьте эту команду.
            </p>
            <div class="d-flex align-items-center bg-white rounded border p-2 mb-2">
                <code class="mono me-auto">/disable_offline_notifications@<span class="bot-username-bare"></span></code>
                <button class="btn btn-outline-secondary btn-sm ms-2 copy-btn" title="Скопировать"><i class="fas fa-copy"></i></button>
            </div>
            <p>
                Вы можете удалить команду после установки бота.
                Чтобы вновь включить офлайн-оповещения, просто замените <span class="mono">disable</span> на <span class="mono">enable</span>.
            </p>

            <h4>Шаг 4 (необязательный): Отключить скриншоты</h4>
            <p>
                По умолчанию бот отправляет скриншот с каждым оповещением. Чтобы отключить скриншоты, отправьте эту команду.
            </p>
            <div class="d-flex align-items-center bg-white rounded border p-2 mb-2">
                <code class="mono me-auto">/disable_images@<span class="bot-username-bare"></span></code>
                <button class="btn btn-outline-secondary btn-sm ms-2 copy-btn" title="Скопировать"><i class="fas fa-copy"></i></button>
            </div>
            <p>
                Вы можете удалить команду после установки бота.
                Чтобы включить скриншоты, просто замените <span class="mono">disable</span> на <span class="mono">enable</span>.
            </p>
        </div>
    </main>
    {{ template "footer" . }}
</div>

<script>
(function() {
    var bots = {
        "Twitch": "TwitchSirenBot",
        "Chaturbate": "ChaturbateSirenBot",
        "Stripchat": "StripchatSirenBot",
        "BongaCams": "BongaCamsSirenBot",
        "LiveJasmin": "RuLiveJasminSirenBot",
        "CamSoda": "RuCamSodaSirenBot",
        "Flirt4Free": "RuFlirt4FreeSirenBot",
        "Streamate": "RuStreamateSirenBot"
    };

    var addPlaceholders = {
        "Twitch": "ВАШ_КАНАЛ_TWITCH",
        "Chaturbate": "МОДЕЛЬ",
        "Stripchat": "МОДЕЛЬ",
        "BongaCams": "МОДЕЛЬ",
        "LiveJasmin": "МОДЕЛЬ",
        "CamSoda": "МОДЕЛЬ",
        "Flirt4Free": "МОДЕЛЬ",
        "Streamate": "МОДЕЛЬ"
    };

    var typeNamesAccusative = { "channel": "канал", "group": "группу" };
    var typeNamesPrepositional = { "channel": "вашем канале", "group": "вашей группе" };

    var selectedType = "channel";
    var selectedPlatform = "Twitch";

    var typeButtons = document.querySelectorAll("#type-selector .platform-btn");
    var platformButtons = document.querySelectorAll("#platform-selector .platform-btn");
    var usernameInput = document.getElementById("username-input");

    typeButtons.forEach(function(btn) {
        btn.addEventListener("click", function() {
            typeButtons.forEach(function(b) { b.classList.remove("active"); });
            btn.classList.add("active");
            selectedType = btn.getAttribute("data-type");
            update();
        });
    });

    platformButtons.forEach(function(btn) {
        btn.addEventListener("click", function() {
            platformButtons.forEach(function(b) { b.classList.remove("active"); });
            btn.classList.add("active");
            selectedPlatform = btn.getAttribute("data-platform");
            update();
        });
    });

    usernameInput.addEventListener("input", function() { update(); });

    document.querySelectorAll(".copy-btn").forEach(function(btn) {
        btn.addEventListener("click", function() {
            var text = btn.parentElement.querySelector(".mono").textContent;
            var icon = btn.querySelector("i");
            navigator.clipboard.writeText(text).then(function() {
                icon.className = "fas fa-check";
                setTimeout(function() { icon.className = "fas fa-copy"; }, 2000);
            });
        });
    });

    update();

    function update() {
        if (!selectedType || !selectedPlatform) return;

        var botUsername = bots[selectedPlatform];
        var instructions = document.getElementById("instructions");
        instructions.style.display = "";

        document.querySelectorAll(".bot-username").forEach(function(el) {
            el.textContent = "@" + botUsername;
        });
        document.querySelectorAll(".bot-username-bare").forEach(function(el) {
            el.textContent = botUsername;
        });
        document.querySelectorAll(".type-name-accusative").forEach(function(el) {
            el.textContent = typeNamesAccusative[selectedType];
        });
        document.querySelectorAll(".type-name-prepositional").forEach(function(el) {
            el.textContent = typeNamesPrepositional[selectedType];
        });
        var username = usernameInput.value.trim();
        document.querySelectorAll(".add-placeholder").forEach(function(el) {
            el.textContent = username || addPlaceholders[selectedPlatform];
        });

        var copyVisibility = username ? "visible" : "hidden";
        document.querySelectorAll(".copy-btn").forEach(function(btn) {
            btn.style.visibility = copyVisibility;
        });

        document.getElementById("channel-steps").style.display = selectedType === "channel" ? "" : "none";
        document.getElementById("group-steps").style.display = selectedType === "group" ? "" : "none";
        document.getElementById("bongacams-warning").style.display = selectedPlatform === "BongaCams" ? "" : "none";
    }
})();
</script>
</body>
</html>
